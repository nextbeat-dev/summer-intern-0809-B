@*
 * This file is part of the Nextbeat services.
 *
 * For the full copyright and license information,
 * please view the LICENSE file that was distributed with this source code.
 *@
@import views.html.helper
@import model.site.facility.SiteViewValueFacilityList
@import play.api.data.Form
@import persistence.facility.model.FacilitySearch
@(vv: SiteViewValueFacilityList, form: Form[FacilitySearch])(implicit messages: play.api.i18n.Messages)

@** 施設検索一覧 *@

@views.html.common.layout.InnerContent("site-app-new-user-form", "content") {	
  <div class="splash__section">	
    @views.html.common.component.image.ResponsiveImage(	
      path    = "site/facility/list/logo.png",	
      alt     = "Retreats VIP",	
      classes = "splash__logo"	
    )	
    @views.html.common.component.image.ResponsiveImage(	
      path    = "site/facility/list/splash.png",	
      alt     = "splash photo",	
      classes = "splash__photo"	
    )	
    <div class="splash__copy">	
      <h2 class="big">	
          都会の喧騒から離れて、<br>	
          議論を楽しむ。	
      </h2>	
      <p class="small">	
        いつもの喧騒を抜け出して、<br>	
        雄大な自然の中でゆったりと議論する。<br>	
        Retreats VIPはリゾートミーティングに必要なすべてのものと<br>	
        会話を弾ませる素晴らしい空間を提供します。	
      </p>	
    </div>	
  </div>	


   @** --[ 検索フォーム ]---------------------------------------------------------- *@
  <h3 class="content__section header">
    <span class="header__title">施設一覧</span>
  </h3>

  <div class="content__section form">
    @helper.form(action = controllers.facility.routes.FacilityController.search) {

      @** 地方 *@
      <div class="form__section pref inline">
        @helper.select(
          field   = form("regionCode"),
          options = vv.regions.map(v => (v.code.toString, v.name)),
          '_label           -> "地方",
          '_default         -> "未選択",
          '_showConstraints -> false
        )
      </div>
      @** 人数 *@
      <div class="form__section pref inline">
        @helper.select(
          field   = form("capacities"),
          options = vv.capacities.map(v => (v.toString,v.toString)),
          '_label           -> "人数",
          '_default         -> "未選択",
          '_showConstraints -> false
        )
      </div>
      @** 登録ボタン *@
      <div class="form__section submit inline">
        <button class="button" type="submit">
          <span class="submit__text">検索</span>
        </button>
      </div>
    }
  </div>

  @** --[ 一覧 ]-------------------------------------------------------- *@
  <div class="content__section content">
    <div class="facility-list__wrapper">
      @for(facility <- vv.facilities) {
        <article class="facility-list-item">
          <a href="@controllers.facility.routes.FacilityController.show(facility.id.get)">
            <div class="item-panel__wrapper">
              <header class="facility-item__header">
                <div class="thumbnail"
                  style="background-image: url('@((facility.imagePaths split ',')(0))');">
                </div>
                <h2 class="name">@facility.name</h2>
                <p class="cost">¥ @facility.cost.toString.reverse.sliding(3, 3).map(_.reverse).toSeq.reverse.mkString(",")/人</p>
              </header>
              <section class="facility-item__content">
                <p class="strong">@facility.catchCopy</p>
                <p>@facility.description</p>
              </section>
            </div>
          </a>
        </article>
      }
    </div>
  </div>
}
